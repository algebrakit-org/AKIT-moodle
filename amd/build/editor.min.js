define("qtype_algebrakit/editor",["exports","./selectors"],(function(_exports,_selectors){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_selectors=(obj=_selectors)&&obj.__esModule?obj:{default:obj};const AK=AlgebraKIT;_exports.init=()=>{new AKEditor};class AKEditor{get runButton(){return document.querySelector(_selectors.default.actions.runButton)}get authoringComponent(){return document.querySelector(_selectors.default.actions.authoringComponent)}get previewComponent(){return document.querySelector(_selectors.default.actions.previewComponent)}get previewContainer(){return document.querySelector(_selectors.default.actions.previewContainer)}get jsonInputElement(){return document.querySelector(_selectors.default.actions.jsonInputElement)}constructor(){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(this,"spec",null),this.runButton.addEventListener("click",this.run.bind(this));let jsonString=this.jsonInputElement.value;jsonString&&(this.spec=JSON.parse(jsonString)),this.loadEditor()}async loadEditor(){await AK.waitUntilReady(this.authoringComponent),this.spec?await this.authoringComponent.updateExercise(this.spec):this.spec=await this.authoringComponent.getExercise(),this.authoringComponent.addWidgetListener("exerciseChanged",(()=>this.saveSpec()))}async saveSpec(){this.authoringComponent&&(this.spec=await this.authoringComponent.getExercise(),this.jsonInputElement.value=JSON.stringify(this.spec))}async run(){this.previewContainer.innerHTML='<akit-exercise-preview show-run-button="false" exercise-id="'.concat(this.spec.id,'"></akit-exercise-preview>'),await AK.waitUntilReady(this.previewComponent),this.previewComponent.run()}}}));

//# sourceMappingURL=editor.min.js.map